@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Light Theme (default) ===== */
:root {
  --color-bg: #FFFFFF;
  --color-surface: #F7F7F8;
  --color-surface-elevated: #FFFFFF;
  --color-text: #1A1A1A;
  --color-text-secondary: #4A4A4A;
  --color-text-muted: #6B7280;
  --color-primary: #0891B2;
  --color-secondary: #6D28D9;
  --color-accent: #DB2777;
  --color-border: #E5E7EB;
  --color-code-bg: #F3F4F6;
  --color-tag: #0891B2;
  --color-category: #6D28D9;
  --color-meta: #6B7280;
}

/* ===== Dark Theme ===== */
.dark {
  --color-bg: #0A0A0F;
  --color-surface: #1A1A2E;
  --color-surface-elevated: #22223A;
  --color-text: #E4E4E7;
  --color-text-secondary: #A1A1AA;
  --color-text-muted: #71717A;
  --color-primary: #00D4FF;
  --color-secondary: #7C3AED;
  --color-accent: #FF006E;
  --color-border: #27273A;
  --color-code-bg: #12121F;
  --color-tag: #22D3EE;
  --color-category: #A78BFA;
  --color-meta: #9CA3AF;
}

/* ===== Font Size System ===== */
[data-font-size="small"]  { --article-font-size: 18px; }
[data-font-size="medium"] { --article-font-size: 20px; }
[data-font-size="large"]  { --article-font-size: 22px; }

@layer base {
  body {
    @apply font-body antialiased;
    font-feature-settings: "palt" 1;
    color: var(--color-text);
    background-color: var(--color-bg);
  }

  .dark body {
    background-image:
      radial-gradient(ellipse 80% 60% at 8% 30%, rgba(0, 212, 255, 0.04) 0%, transparent 60%),
      radial-gradient(ellipse 80% 60% at 92% 50%, rgba(124, 58, 237, 0.04) 0%, transparent 60%),
      radial-gradient(ellipse 60% 40% at 50% 85%, rgba(0, 212, 255, 0.025) 0%, transparent 50%);
    background-attachment: fixed;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-heading font-semibold;
    color: var(--color-text);
  }

  h1 {
    @apply text-3xl md:text-4xl;
  }

  h2 {
    @apply text-2xl md:text-3xl;
  }

  h3 {
    @apply text-xl md:text-2xl;
  }

  a {
    color: var(--color-primary);
    @apply transition-colors;
  }
  a:hover {
    opacity: 0.8;
  }

  /* Scrollbar - Light */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--color-surface);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 9999px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-primary);
    opacity: 0.5;
  }
}

@layer components {
  .btn {
    @apply px-4 py-2 rounded-md font-medium transition-all duration-200;
  }

  .btn-primary {
    background-color: var(--color-primary);
    @apply text-white;
  }
  .dark .btn-primary {
    @apply text-background shadow-glow;
  }
  .btn-primary:hover {
    opacity: 0.9;
  }

  .btn-secondary {
    background-color: var(--color-secondary);
    @apply text-white;
  }
  .dark .btn-secondary {
    @apply shadow-glow-purple;
  }

  .btn-outline {
    border: 1px solid var(--color-primary);
    color: var(--color-primary);
  }
  .btn-outline:hover {
    background-color: var(--color-primary);
    @apply text-white;
  }
  .dark .btn-outline:hover {
    @apply text-background;
  }

  .btn-ghost {
    color: var(--color-text-muted);
  }
  .btn-ghost:hover {
    color: var(--color-text);
    background-color: var(--color-surface);
  }

  .card {
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    @apply rounded-lg p-6 shadow-card-light;
  }
  .dark .card {
    @apply shadow-soft;
  }

  .card-glow {
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    @apply rounded-lg p-6 transition-all duration-300 shadow-card-light;
  }
  .card-glow:hover {
    border-color: var(--color-primary);
    @apply shadow-card-light-hover;
  }
  .dark .card-glow {
    @apply shadow-none;
  }
  .dark .card-glow:hover {
    @apply shadow-glow;
  }

  .input {
    @apply w-full px-4 py-2 rounded-md transition-all duration-200;
    background-color: var(--color-bg);
    border: 1px solid var(--color-border);
    color: var(--color-text);
  }
  .input::placeholder {
    color: var(--color-text-muted);
    opacity: 0.6;
  }
  .input:focus {
    @apply outline-none ring-2;
    border-color: var(--color-primary);
    ring-color: var(--color-primary);
    opacity: 0.3;
  }

  .container-narrow {
    @apply max-w-3xl mx-auto px-4;
  }

  .container-wide {
    @apply max-w-6xl mx-auto px-4;
  }

  /* Neon text effect - only in dark mode */
  .text-neon {
    text-shadow: none;
  }
  .dark .text-neon {
    text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 40px currentColor;
  }

  /* Gradient border effect */
  .border-gradient {
    position: relative;
    background: linear-gradient(var(--color-surface), var(--color-surface)) padding-box,
                linear-gradient(135deg, var(--color-primary), var(--color-secondary), var(--color-accent)) border-box;
    border: 2px solid transparent;
  }

  /* Glass effect - dual theme */
  .glass {
    @apply backdrop-blur-md;
    border: 1px solid var(--color-border);
    background-color: rgba(255, 255, 255, 0.85);
  }
  .dark .glass {
    background-color: rgba(26, 26, 46, 0.8);
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Animated gradient background */
  .bg-animated-gradient {
    background: linear-gradient(-45deg, #0A0A0F, #1A1A2E, #0A0A0F, #1A1A2E);
    background-size: 400% 400%;
    animation: gradient-shift 15s ease infinite;
  }

  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* Hero slide text fade-in */
  .animate-fade-in {
    animation: fade-in 0.8s ease-out both;
  }
  .animate-fade-in-delay {
    animation: fade-in 0.8s ease-out 0.2s both;
  }
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ===== prose-article: Medium-like typography ===== */
  .prose-article {
    font-family: 'Noto Serif TC', Georgia, serif;
    font-size: var(--article-font-size, 20px);
    line-height: 1.72;
    color: var(--color-text);
    max-width: 680px;
  }

  .prose-article h1,
  .prose-article h2,
  .prose-article h3 {
    font-family: 'Inter', 'Noto Sans TC', sans-serif;
    font-weight: 700;
    color: var(--color-text);
  }

  .prose-article h1 {
    font-size: 30px;
    line-height: 1.3;
    margin: 56px 0 20px;
  }

  .prose-article h2 {
    font-size: 26px;
    line-height: 1.35;
    margin: 48px 0 16px;
  }

  .prose-article h3 {
    font-size: 22px;
    line-height: 1.4;
    margin: 40px 0 12px;
  }

  .prose-article p {
    margin-bottom: 32px;
  }

  .prose-article a {
    color: var(--color-primary);
    text-decoration: underline;
    text-underline-offset: 3px;
  }
  .prose-article a:hover {
    opacity: 0.7;
  }

  .prose-article blockquote {
    border-left: 3px solid var(--color-primary);
    padding-left: 20px;
    font-style: italic;
    color: var(--color-text-secondary);
    margin: 32px 0;
  }

  .prose-article code {
    background: var(--color-code-bg);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.9em;
    font-family: 'JetBrains Mono', monospace;
  }

  .prose-article pre {
    background: var(--color-code-bg);
    padding: 20px;
    border-radius: 8px;
    overflow-x: auto;
    margin: 32px 0;
    font-size: 15px;
    line-height: 1.6;
    border: 1px solid var(--color-border);
  }

  .prose-article pre code {
    background: transparent;
    padding: 0;
    border-radius: 0;
    font-size: inherit;
  }

  .prose-article img {
    border-radius: 8px;
    margin: 32px 0;
    max-width: 100%;
  }

  .prose-article ul,
  .prose-article ol {
    margin: 24px 0;
    padding-left: 24px;
  }

  .prose-article li {
    margin-bottom: 8px;
  }

  .prose-article li::marker {
    color: var(--color-primary);
  }

  .prose-article hr {
    border-color: var(--color-border);
    margin: 48px 0;
  }

  .prose-article table {
    width: 100%;
    border-collapse: collapse;
    margin: 32px 0;
  }

  .prose-article th,
  .prose-article td {
    padding: 10px 16px;
    border: 1px solid var(--color-border);
    text-align: left;
  }

  .prose-article th {
    background: var(--color-surface);
    font-weight: 600;
    font-family: 'Inter', 'Noto Sans TC', sans-serif;
  }

  /* ===== prose-cyber: Legacy dark-only style ===== */
  .prose-cyber {
    color: var(--color-text);
    @apply leading-relaxed;
  }

  .prose-cyber h1,
  .prose-cyber h2,
  .prose-cyber h3 {
    @apply font-heading mt-8 mb-4;
    color: var(--color-text);
  }

  .prose-cyber h1 {
    color: var(--color-primary);
  }

  .prose-cyber h2 {
    color: var(--color-text-secondary);
  }

  .prose-cyber p {
    @apply mb-4;
  }

  .prose-cyber a {
    color: var(--color-primary);
    @apply underline underline-offset-2;
  }

  .prose-cyber blockquote {
    border-left: 4px solid var(--color-secondary);
    @apply pl-4 italic my-6 py-2;
    color: var(--color-text-muted);
    background: var(--color-surface);
    opacity: 0.5;
  }

  .prose-cyber code {
    background: var(--color-code-bg);
    color: var(--color-accent);
    border: 1px solid var(--color-border);
    @apply px-1.5 py-0.5 rounded text-sm font-mono;
  }

  .prose-cyber pre {
    background: var(--color-code-bg);
    border: 1px solid var(--color-border);
    @apply p-4 rounded-lg overflow-x-auto my-6;
  }

  .prose-cyber pre code {
    @apply border-0 p-0 bg-transparent;
  }

  .prose-cyber ul,
  .prose-cyber ol {
    @apply my-4 pl-6;
  }

  .prose-cyber li {
    @apply mb-2;
  }

  .prose-cyber li::marker {
    color: var(--color-primary);
  }

  .prose-cyber img {
    border: 1px solid var(--color-border);
    @apply rounded-lg my-6;
  }

  .prose-cyber hr {
    border-color: var(--color-border);
    @apply my-8;
  }

  /* Legacy prose-warm mapped to prose-cyber for compatibility */
  .prose-warm {
    @apply prose-cyber;
  }

  /* Slide-up animation for mobile TOC bottom sheet */
  .animate-slide-up {
    animation: slide-up 0.3s ease-out both;
  }

  @keyframes slide-up {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }
}
